# 提示词管理功能指南

## 概述

本应用新增了完整的提示词管理功能，允许用户添加、保存、选择、导出和导入翻译提示词。这个功能让用户可以：

- 创建和保存自定义提示词
- 快速选择常用的提示词
- 按分类组织提示词
- 导出和导入提示词配置
- 管理默认和用户创建的提示词

## 功能特性

### 1. 默认提示词

系统预置了4个默认提示词：

- **翻译成中文**: 将文本翻译成中文，保持原文语气和风格
- **翻译成英文**: 将文本翻译成英文，保持原文语气和风格  
- **润色文本**: 对文本进行润色，使其更加流畅自然
- **总结文本**: 对文本进行总结，提取主要观点和关键信息

### 2. 提示词分类

提示词按以下分类组织：

- **translation**: 翻译类提示词
- **polish**: 润色类提示词
- **summary**: 总结类提示词
- **custom**: 用户自定义提示词
- **imported**: 从外部导入的提示词

### 3. 用户界面功能

#### 提示词输入区域
- 在翻译设置选项卡中，提示词输入框旁边新增了控制按钮
- **选择提示词**: 打开提示词选择模态框，快速选择已保存的提示词
- **保存**: 将当前输入的提示词保存为新的用户提示词

#### 提示词管理区域
- **添加提示词**: 创建新的提示词
- **导出**: 将所有用户提示词导出为JSON文件
- **导入**: 从JSON文件导入提示词
- **清空**: 删除所有用户创建的提示词

#### 提示词列表
- 显示所有可用的提示词（默认 + 用户创建）
- 按分类筛选提示词
- 每个提示词项显示名称、内容和分类
- 提供使用、编辑、删除等操作按钮

### 4. 模态框功能

#### 提示词选择模态框
- 显示所有可用提示词
- 按分类筛选
- 点击选择后自动填入翻译提示词输入框

#### 添加/编辑提示词模态框
- 输入提示词名称、内容和分类
- 支持新建和编辑两种模式
- 表单验证确保数据完整性

## API接口

### 获取提示词列表
```
GET /api/prompts
```

返回所有提示词（默认 + 用户创建）

### 添加提示词
```
POST /api/prompts
Content-Type: application/json

{
    "name": "提示词名称",
    "content": "提示词内容",
    "category": "分类"
}
```

### 更新提示词
```
PUT /api/prompts/{prompt_id}
Content-Type: application/json

{
    "name": "新名称",
    "content": "新内容",
    "category": "新分类"
}
```

### 删除提示词
```
DELETE /api/prompts/{prompt_id}
```

### 获取特定提示词
```
GET /api/prompts/{prompt_id}
```

### 按分类获取提示词
```
GET /api/prompts/category/{category}
```

### 导出提示词
```
GET /api/prompts/export
```

返回JSON格式的导出数据

### 导入提示词
```
POST /api/prompts/import
Content-Type: application/json

{
    "json_data": "导出的JSON字符串"
}
```

### 清空用户提示词
```
DELETE /api/prompts/clear
```

## 数据格式

### 提示词对象结构
```json
{
    "id": "唯一标识符",
    "name": "提示词名称",
    "content": "提示词内容",
    "category": "分类",
    "is_user_created": true,
    "created_at": "创建时间",
    "updated_at": "更新时间"
}
```

### 导出文件格式
```json
{
    "version": "1.0",
    "exported_at": "导出时间",
    "prompts": [
        {
            "name": "提示词名称",
            "content": "提示词内容",
            "category": "分类"
        }
    ]
}
```

## 使用示例

### 1. 创建自定义提示词
1. 在翻译设置选项卡中，输入提示词内容
2. 点击"保存"按钮
3. 在弹出的模态框中填写名称和选择分类
4. 点击"保存"完成创建

### 2. 使用已保存的提示词
1. 点击"选择提示词"按钮
2. 在模态框中选择需要的提示词
3. 提示词内容会自动填入输入框

### 3. 导出提示词
1. 点击"导出"按钮
2. 系统会自动下载JSON格式的提示词文件

### 4. 导入提示词
1. 点击"导入"按钮
2. 选择之前导出的JSON文件
3. 系统会导入文件中的提示词

## 技术实现

### 后端实现
- **TranslationConfig类**: 扩展了提示词管理方法
- **Session存储**: 用户提示词存储在Flask session中
- **API路由**: 新增了完整的RESTful API接口
- **数据验证**: 完整的输入验证和错误处理

### 前端实现
- **JavaScript类**: 新增了提示词管理相关方法
- **模态框**: 使用原生JavaScript实现模态框功能
- **事件处理**: 完整的事件绑定和用户交互
- **数据同步**: 实时更新提示词列表和状态

### 样式设计
- **响应式布局**: 适配不同屏幕尺寸
- **现代化UI**: 使用Font Awesome图标和Bootstrap样式
- **交互反馈**: 悬停效果和状态指示

## 注意事项

1. **默认提示词**: 系统默认提示词不可编辑或删除
2. **会话持久性**: 用户提示词存储在会话中，浏览器关闭后会丢失
3. **导入验证**: 导入时会验证JSON格式和必要字段
4. **重复检查**: 导入时会检查重复名称并跳过
5. **错误处理**: 完整的错误提示和用户反馈

## 未来扩展

1. **数据库存储**: 将提示词存储到数据库中实现持久化
2. **用户账户**: 支持多用户和提示词共享
3. **提示词模板**: 支持变量替换和动态内容
4. **版本控制**: 提示词版本管理和回滚功能
5. **云端同步**: 跨设备同步提示词配置
